<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Optional: include a polyfill for ES6 Promises for IE11 -->
    <script src="../post.js"></script>
    <script src="../myAjax2.js"></script>
    <script type="text/javascript" src="jquery-3.5.1.min.js"> </script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <!-- Optional: include a polyfill for ES6 Promises for IE11 -->

    <script>

              // $.ajax({
              //
              //      type: "POST",
              //
              //      url:"http://175.24.51.64:8081/users/register",
              //
              //      data: "name=ima&phoneNumber=121233&email=71@qq.com&password=1&status=1&deleteFlag=1",
              //
              //      success: function(msg){
              //
              //        console.log( "Data Saved: " + msg );
              //
              //      },
              //      error:function (msg) {
              //       console.log( "Data not Saved: " + msg );
              //      }
              //
              //   });
              const Toast = Swal.mixin({
                  toast: true,
                  position: 'top-end',
                  showConfirmButton: false,
                  timer: 3000,
                  timerProgressBar: true,
                  didOpen: (toast) => {
                      toast.addEventListener('mouseenter', Swal.stopTimer)
                      toast.addEventListener('mouseleave', Swal.resumeTimer)
                  }
              });
              function f() {

                  // var username=document.getElementById("regist_user").value;
                  // console.log("username"+username);
                  Toast.fire({
                      icon: 'success',
                      title: 'Signed in successfully'
                  })

                  // $.ajax({
                  //
                  //      type: "POST",
                  //     // 175.24.51.64:8081/users/login?name=Pw&password=12
                  //      url:"http://175.24.51.64:8081/users/login",
                  //
                  //      data: "name=Pw&password=1s",
                  //
                  //      success: function(msg){
                  //
                  //        var data = JSON.parse(msg)
                  //        console.log( "Data Saved: " + data['msg'] );
                  //        if(data['msg']==='failed'){
                  //            Swal.fire({
                  //                position: 'top-end',
                  //                icon: 'error',
                  //                title: 'Wrong uesrname or passord',
                  //                showConfirmButton: false,
                  //                timer: 1500
                  //            })
                  //        }
                  //        else{
                  //            Swal.fire({
                  //                position: 'top-end',
                  //                icon: 'success',
                  //                title: 'Login success',
                  //                showConfirmButton: false,
                  //                timer: 1500
                  //            })
                  //        }
                  //
                  //      },
                  //      error:function (msg) {
                  //
                  //       console.log( );
                  //
                  //      }
                  //
                  //   });
              }

              /*
                  校验用户名:
                  1.事件: onblur  失去焦点
                  2.函数: checkUsername()
                  3.函数去显示校验结果
              */
              function checkUsername(){
                  //获取用户输入的内容
                  var uValue = document.getElementById("username").value.trim();
                  //对输入的内容进行校验
                  //获得要显示结果的span
                  var span = document.getElementById("span_username");
                  if(uValue.length == 0){
                      //显示校验结果
                      span.innerHTML = "<font color='red' size='2'>×,不能为空</font>";
                      return false;
                  }else if(uValue.length < 4 && uValue.length > 0){
                      //显示校验结果
                      span.innerHTML = "<font color='red' size='2'>×,用户名太短</font>";
                      return false;
                  }else if(uValue.length > 18){
                      //显示校验结果
                      span.innerHTML = "<font color='red' size='2'>×,用户名太长</font>";
                      return false;
                  }else{
                      if(!judeuser(span)){
                          span.innerHTML = "<font color='green' size='2'>√,用户名可用</font>";
                          name = $("#username").val().trim();
                          return true
                      }
                      else{
                          return false;
                      }
                  }
              }
    </script>
</head>
<body>
<div id="myDiv"><h2>使用 AJAX 修改该文本内容</h2></div>

<button type="button" id="but" onclick="f()">修改内容</button>
<input type="text" class="form-control" id="regist_user" placeholder="Username">
<div class="item">
    <p class="p_row"><input placeholder="用户名" type="text" name="username" id="username" value="" required="required" onfocus="showTips('span_username','长度不能小于4且不能大于18')" onblur="checkUsername()" onkeyup="checkUsername()"/></p>
    <span id="span_username"></span>
</div>
</body>


</html>